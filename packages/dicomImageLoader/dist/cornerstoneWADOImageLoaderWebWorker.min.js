/*! cornerstone-wado-image-loader - 0.14.3 - 2017-41-19 | (c) 2016 Chris Hafey | https://github.com/chafey/cornerstoneWADOImageLoader */
var cornerstoneWADOImageLoaderWebWorker=function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=59)}({2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="0.14.3"},31:function(e,t,r){"use strict";function a(e,t){var r=new JpxImage;r.parse(t);var a=r.tiles.length;if(1!==a)throw"JPEG2000 decoder returned a tileCount of "+a+", when 1 is expected";return e.columns=r.width,e.rows=r.height,e.pixelData=r.tiles[0].items,e}function n(e,t,r){var a=s._malloc(e.length);s.writeArrayToMemory(e,a);var n=s._malloc(4),i=s._malloc(4),l=s._malloc(4),o=s._malloc(4),f=s._malloc(4),u=Date.now();if(0!==s.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[a,e.length,n,i,l,o,f]))return console.log("[opj_decode] decoding failed!"),s._free(a),s._free(s.getValue(n,"*")),s._free(l),s._free(o),s._free(i),void s._free(f);var d=s.getValue(n,"*"),c={length:s.getValue(i,"i32"),sx:s.getValue(l,"i32"),sy:s.getValue(o,"i32"),nbChannels:s.getValue(f,"i32"),perf_timetodecode:void 0,pixelData:void 0},p=c.sx*c.sy*c.nbChannels,m=new Int32Array(s.HEAP32.buffer,d,p);if(1===t)if(Uint8Array.from)c.pixelData=Uint8Array.from(m);else{c.pixelData=new Uint8Array(p);for(var g=0;g<p;g++)c.pixelData[g]=m[g]}else if(r)if(Int16Array.from)c.pixelData=Int16Array.from(m);else{c.pixelData=new Int16Array(p);for(var y=0;y<p;y++)c.pixelData[y]=m[y]}else if(Uint16Array.from)c.pixelData=Uint16Array.from(m);else{c.pixelData=new Uint16Array(p);for(var b=0;b<p;b++)c.pixelData[b]=m[b]}var x=Date.now();return c.perf_timetodecode=x-u,s._free(a),s._free(n),s._free(d),s._free(i),s._free(l),s._free(o),s._free(f),c}function i(e,t){var r=e.bitsAllocated<=8?1:2,a=1===e.pixelRepresentation,i=n(t,r,a);return e.columns=i.sx,e.rows=i.sy,e.pixelData=i.pixelData,i.nbChannels>1&&(e.photometricInterpretation="RGB"),e}function l(e){if(!e.usePDFJS&&"undefined"==typeof OpenJPEG)throw"OpenJPEG decoder not loaded";if(!(s||(s=OpenJPEG())&&s._jp2_decode))throw"OpenJPEG failed to initialize"}function o(e,t,r,n){return n=n||{},l(r),n.usePDFJS||r.usePDFJS?a(e,t):i(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var s=void 0;t.default=o,t.initializeJPEG2000=l},32:function(e,t,r){"use strict";function a(e,t){var r=l._malloc(e.length);l.writeArrayToMemory(e,r);var a=l._malloc(4),n=l._malloc(4),i=l._malloc(4),o=l._malloc(4),s=l._malloc(4),f=l._malloc(4),u=l._malloc(4),d=l._malloc(4),c=l._malloc(4),p=l.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[r,e.length,a,n,i,o,s,f,d,u,c]),m={result:p,width:l.getValue(i,"i32"),height:l.getValue(o,"i32"),bitsPerSample:l.getValue(s,"i32"),stride:l.getValue(f,"i32"),components:l.getValue(d,"i32"),allowedLossyError:l.getValue(u,"i32"),interleaveMode:l.getValue(c,"i32"),pixelData:void 0},g=l.getValue(a,"*");return m.bitsPerSample<=8?(m.pixelData=new Uint8Array(m.width*m.height*m.components),m.pixelData.set(new Uint8Array(l.HEAP8.buffer,g,m.pixelData.length))):t?(m.pixelData=new Int16Array(m.width*m.height*m.components),m.pixelData.set(new Int16Array(l.HEAP16.buffer,g,m.pixelData.length))):(m.pixelData=new Uint16Array(m.width*m.height*m.components),m.pixelData.set(new Uint16Array(l.HEAP16.buffer,g,m.pixelData.length))),l._free(r),l._free(g),l._free(a),l._free(n),l._free(i),l._free(o),l._free(s),l._free(f),l._free(d),l._free(c),m}function n(){if("undefined"==typeof CharLS)throw"No JPEG-LS decoder loaded";if(!(l||(l=CharLS())&&l._jpegls_decode))throw"JPEG-LS failed to initialize"}function i(e,t){n();var r=a(t,1===e.pixelRepresentation);if(0!==r.result&&6!==r.result)throw"JPEG-LS decoder failed to decode frame (error code "+r.result+")";return e.columns=r.width,e.rows=r.height,e.pixelData=r.pixelData,e}Object.defineProperty(t,"__esModule",{value:!0});var l=void 0;t.default=i,t.initializeJPEGLS=n},36:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){m||(self.importScripts(e.decodeTask.codecsPath),m=!0,e.decodeTask.initializeCodecsOnStartup&&((0,s.initializeJPEG2000)(e.decodeTask),(0,f.initializeJPEGLS)(e.decodeTask)))}function i(e){g=e,e.decodeTask.loadCodecsOnStartup&&n(e)}function l(e){if(void 0===e.smallestPixelValue||void 0===e.largestPixelValue){var t=(0,d.default)(e.pixelData);e.smallestPixelValue=t.min,e.largestPixelValue=t.max}}function o(e,t){n(g);var r=e.data.imageFrame,a=new Uint8Array(e.data.pixelData);(0,p.default)(r,e.data.transferSyntax,a,g.decodeTask,e.data.options),l(r),r.pixelData=r.pixelData.buffer,t(r,[r.pixelData])}Object.defineProperty(t,"__esModule",{value:!0});var s=r(31),f=r(32),u=r(58),d=a(u),c=r(52),p=a(c),m=!1,g=void 0;t.default={taskType:"decodeTask",handler:o,initialize:i}},37:function(e,t,r){"use strict";function a(e){if(!o){if(s=e.config,e.config.webWorkerTaskPaths)for(var t=0;t<e.config.webWorkerTaskPaths.length;t++)self.importScripts(e.config.webWorkerTaskPaths[t]);Object.keys(l).forEach(function(e){l[e].initialize(s.taskConfiguration)}),self.postMessage({taskType:"initialize",status:"success",result:{},workerIndex:e.workerIndex}),o=!0}}function n(e){if(l[e.taskType])return console.log('attempt to register duplicate task handler "',e.taskType,'"'),!1;l[e.taskType]=e,o&&e.initialize(s.taskConfiguration)}function i(e){s=e.config,self.importScripts(e.sourcePath)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerTaskHandler=n;var l={},o=!1,s=void 0;self.onmessage=function(e){return"initialize"===e.data.taskType?void a(e.data):"loadWebWorkerTask"===e.data.taskType?void i(e.data):l[e.data.taskType]?void l[e.data.taskType].handler(e.data,function(t,r){self.postMessage({taskType:e.data.taskType,status:"success",result:t,workerIndex:e.data.workerIndex},r)}):(console.log("no task handler for ",e.data.taskType),console.log(l),void self.postMessage({taskType:e.data.taskType,status:"failed - no task handler registered",workerIndex:e.data.workerIndex}))}},52:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var i=(new Date).getTime();if("1.2.840.10008.1.2"===t)e=(0,l.default)(e,r);else if("1.2.840.10008.1.2.1"===t)e=(0,l.default)(e,r);else if("1.2.840.10008.1.2.2"===t)e=(0,s.default)(e,r);else if("1.2.840.10008.1.2.1.99"===t)e=(0,l.default)(e,r);else if("1.2.840.10008.1.2.5"===t)e=(0,u.default)(e,r);else if("1.2.840.10008.1.2.4.50"===t)e=(0,c.default)(e,r);else if("1.2.840.10008.1.2.4.51"===t)e=(0,c.default)(e,r);else if("1.2.840.10008.1.2.4.57"===t)e=(0,m.default)(e,r);else if("1.2.840.10008.1.2.4.70"===t)e=(0,m.default)(e,r);else if("1.2.840.10008.1.2.4.80"===t)e=(0,y.default)(e,r);else if("1.2.840.10008.1.2.4.81"===t)e=(0,y.default)(e,r);else if("1.2.840.10008.1.2.4.90"===t)e=(0,x.default)(e,r,a,n);else{if("1.2.840.10008.1.2.4.91"!==t)throw console&&console.log&&console.log("Image cannot be decoded due to Unsupported transfer syntax "+t),"no decoder for transfer syntax "+t;e=(0,x.default)(e,r,a,n)}var o=(new Date).getTime();return e.decodeTimeInMS=o-i,e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(56),l=a(i),o=r(53),s=a(o),f=r(57),u=a(f),d=r(54),c=a(d),p=r(55),m=a(p),g=r(32),y=a(g),b=r(31),x=a(b);t.default=n},53:function(e,t,r){"use strict";function a(e){return(255&e)<<8|e>>8&255}function n(e,t){if(16===e.bitsAllocated){var r=t.buffer,n=t.byteOffset,i=t.length;n%2&&(r=r.slice(n),n=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(r,n,i/2):e.pixelData=new Int16Array(r,n,i/2);for(var l=0;l<e.pixelData.length;l++)e[l]=a(e.pixelData[l])}else 8===e.bitsAllocated&&(e.pixelData=t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},54:function(e,t,r){"use strict";function a(e,t){if("undefined"==typeof JpegImage)throw"No JPEG Baseline decoder loaded";var r=new JpegImage;return r.parse(t),r.colorTransform=!1,8===e.bitsAllocated?(e.pixelData=r.getData(e.columns,e.rows),e):16===e.bitsAllocated?(e.pixelData=r.getData16(e.columns,e.rows),e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},55:function(e,t,r){"use strict";function a(e,t){if("undefined"==typeof jpeg||void 0===jpeg.lossless||void 0===jpeg.lossless.Decoder)throw"No JPEG Lossless decoder loaded";var r=e.bitsAllocated<=8?1:2,a=t.buffer,n=new jpeg.lossless.Decoder,i=n.decode(a,t.byteOffset,t.length,r);return 0===e.pixelRepresentation?16===e.bitsAllocated?(e.pixelData=new Uint16Array(i.buffer),e):(e.pixelData=new Uint8Array(i.buffer),e):(e.pixelData=new Int16Array(i.buffer),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},56:function(e,t,r){"use strict";function a(e,t){if(16===e.bitsAllocated){var r=t.buffer,a=t.byteOffset,n=t.length;a%2&&(r=r.slice(a),a=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(r,a,n/2):e.pixelData=new Int16Array(r,a,n/2)}else 8===e.bitsAllocated&&(e.pixelData=t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},57:function(e,t,r){"use strict";function a(e,t){if(8===e.bitsAllocated)return n(e,t);if(16===e.bitsAllocated)return i(e,t);throw"unsupported pixel format for RLE"}function n(e,t){for(var r=t,a=e.rows*e.columns,n=new ArrayBuffer(a*e.samplesPerPixel),i=new DataView(r.buffer,r.byteOffset),l=new Int8Array(r.buffer,r.byteOffset),o=new Int8Array(n),s=0,f=i.getInt32(0,!0),u=0;u<f;++u){s=u;var d=i.getInt32(4*(u+1),!0),c=i.getInt32(4*(u+2),!0);0===c&&(c=r.length);for(var p=a*f;d<c;){var m=l[d++];if(m>=0&&m<=127)for(var g=0;g<m+1&&s<p;++g)o[s]=l[d++],s+=e.samplesPerPixel;else if(m<=-1&&m>=-127)for(var y=l[d++],b=0;b<1-m&&s<p;++b)o[s]=y,s+=e.samplesPerPixel}}return e.pixelData=new Uint8Array(n),e}function i(e,t){for(var r=t,a=e.rows*e.columns,n=new ArrayBuffer(a*e.samplesPerPixel*2),i=new DataView(r.buffer,r.byteOffset),l=new Int8Array(r.buffer,r.byteOffset),o=new Int8Array(n),s=i.getInt32(0,!0),f=0;f<s;++f){var u=0,d=0===f?1:0,c=i.getInt32(4*(f+1),!0),p=i.getInt32(4*(f+2),!0);for(0===p&&(p=r.length);c<p;){var m=l[c++];if(m>=0&&m<=127)for(var g=0;g<m+1&&u<a;++g)o[2*u+d]=l[c++],u++;else if(m<=-1&&m>=-127)for(var y=l[c++],b=0;b<1-m&&u<a;++b)o[2*u+d]=y,u++}}return 0===e.pixelRepresentation?e.pixelData=new Uint16Array(n):e.pixelData=new Int16Array(n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},58:function(e,t,r){"use strict";function a(e){for(var t=e[0],r=e[0],a=void 0,n=e.length,i=1;i<n;i++)a=e[i],t=Math.min(t,a),r=Math.max(r,a);return{min:t,max:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},59:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.registerTaskHandler=void 0;var n=r(2);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a(n).default}});var i=r(37),l=r(36),o=a(l);(0,i.registerTaskHandler)(o.default),t.registerTaskHandler=i.registerTaskHandler}});
//# sourceMappingURL=cornerstoneWADOImageLoaderWebWorker.min.js.map